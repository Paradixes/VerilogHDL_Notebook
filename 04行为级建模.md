# 行为级建模

## 语句

**电路主要靠 $√$ 的语句完成**

|   类别   |           语句           | 可综合性 |
| :------: | :----------------------: | :------: |
| 过程语句 |        `initial`         |          |
| 过程语句 |         `always`         |    √     |
|  语句块  |  串行语句块`begin-end`   |    √     |
|  语句块  |  并行语句块`fork-join`   |          |
| 赋值语句 |   过程连续赋值`assign`   |          |
| 赋值语句 |    过程赋值`=`, `<=`     |    √     |
| 条件语句 |        `if-else`         |    √     |
| 条件语句 | `case`, `casez`, `casex` |    √     |
| 循环语句 |        `forever`         |          |
| 循环语句 |         `repeat`         |          |



### 1. `initial`

+ 主要用于仿真和测试，产生测试向量，对信号的初始量赋值
+ 其余应使用复位信号

```verilog
//eg.
module initial_tb1
    reg A, B, C;
	initial
    	begin
        	A = 0; B = 1; C = 0;
            #100 	A = 1; B = 0;	//#100表示延迟时间
            #100 	A = 0; C = 1;
            #100 	B = 1;
            #100 	B = 0; C = 0;
            #50		$finish;
        end
endmodule
```



### 2. `always`

#### (1) 基本语法及概念

+ `always @( <敏感事件表> )`

+ 敏感事件表为触发条件，是一直存在的，只要满足敏感事件表就执行过程块

+ 敏感事件表中不存在与的概念只有或的概念
  + `@( a or b )` = `@( a, b )`

+ 电平触发
  + `@(a)`
+ 边沿触发
  + `@(posedge clk)		//上升沿`
  + `@(negedge clk)      //下降沿`

#### (2) 注意事项

+ 采用过程对组合电路进行描述，作为全部的输入信号需要列入敏感事件表
	```verilog
  //eg.4选1数据选择器
  module mux4_1(out, in0, in1, in2, in3, sel);
      output out;
      input in0, in1, in2, in3;
      input [1:0]sel;
      reg out;						//被赋值信号定义为"reg"类型
      always @(in0 or in1 or in2 or in3 or sel)	//敏感事件列表
          case(sel)
              2'b00:		out = in0;
              2'b01:		out = in1;
              2'b10:		out = in2;
              2'b11:		out = in3;
              default:	out = 2'bx;
          endcase
  endmodule
  ```
  
+ 采用过程对时序电路进行描述，需要把时间信号和部分输入信号列入敏感事件表

  ```verilog
  //eg.同步清零
  always @(posedge clk)	//clk上升沿触发
      begin
          if(!reset)		out = 8'h00;	//同步清零，低电平有效
          else if(load)	out = data;		//同步置数
          else			out = out + 1;
      end
  
  //eg.异步清零
  always @(posedge clk or negedge clear)
      begin
          ...
      end
  ```

+ 由于现在集成电路时钟频率极高，且为了节省电路面积，FPGA中已不存在异步清零，被同步所取代